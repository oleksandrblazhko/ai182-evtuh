## Тестування на неправильну обробку помилок
| ID |
|---|
| WSTG-ERRH-01 |

### Короткі відомості
Усі типи програм (веб-програми, веб-сервери, бази даних тощо) генеруватимуть помилки з різних причин. Розробники часто ігнорують обробку цих помилок або відкидають ідею, що користувач коли-небудь спробує навмисно викликати помилку (наприклад, надсилаючи рядок, де очікується ціле число). Коли розробник розглядає лише щасливий шлях, він забуває про всі інші можливі дані користувача, які код може отримати, але не може обробити.

Іноді виникають такі помилки:

- трасування стека,
- тайм-аути мережі,
- невідповідність вхідних даних,
- дампи пам'яті.

Неналежна обробка помилок може дозволити зловмисникам:

- Зрозуміти API, які використовуються всередині.
- Зіставити карту різних служб, які інтегруються одна з одною, отримавши уявлення про внутрішні системи та фреймворки, які використовуються, що відкриває двері для ланцюжків атак.
- Зібрати версії та типи використовуваних програм.
- Керувати обходом, коли певний виняток не обмежений логікою, встановленою навколо щасливого шляху.

### Цілі тесту
- Визначити існуючий вихід помилки.
- Проаналізувати різні отримані результати.

### Як тестувати
Помилки зазвичай вважаються нешкідливими, оскільки вони надають діагностичні дані та повідомлення, які можуть допомогти користувачеві зрозуміти суть проблеми або розробнику для усунення цієї помилки.

Намагаючись надіслати неочікувані дані або примушуючи систему до певних граничних ситуацій і сценаріїв, система або програма в більшості випадків видаватиме трохи інформації про те, що відбувається всередині, якщо розробники не вимкнуть усі можливі помилки та не повернуть певне спеціальне повідомлення .

#### Веб-сервери
Усі веб-програми працюють на веб-сервері, інтегрованому чи повноцінному. Веб-програми повинні обробляти та аналізувати HTTP-запити, і для цього веб-сервер завжди є частиною стеку. Одними з найвідоміших веб-серверів є NGINX, Apache та IIS.

Веб-сервери мають відомі повідомлення про помилки та формати. Якщо хтось не знає, як вони виглядають, пошук в Інтернеті надасть приклади. Іншим способом було б переглянути їхню документацію або просто налаштувати сервер локально та виявити помилки, переглянувши сторінки, які використовує веб-сервер.

Щоб ініціювати повідомлення про помилки, тестер повинен:

- Знайти випадкових файлів і папок, які не будуть знайдені (404s).
- Спробувати запитати існуючі папки та подивіться поведінку сервера (403, порожня сторінка або перелік каталогу).
- Спробувати надіслати запит, який порушує HTTP RFC. Одним із прикладів може бути надсилання дуже великого шляху, порушення формату заголовків або зміна версії HTTP.

#### Додатки
Програми найбільш сприйнятливі до випуску різноманітних повідомлень про помилки, які включають: трасування стека, дампи пам’яті, неправильно оброблені винятки та загальні помилки. Це відбувається через те, що програми найчастіше створюються на замовлення, і розробникам потрібно спостерігати та обробляти всі можливі випадки помилок (або мати глобальний механізм відлову помилок), і ці помилки можуть виникати через інтеграцію з іншими службами.

Щоб змусити програму видавати ці помилки, тестувальник повинен:

- Визначити можливі точки введення, де програма очікує дані.
- Проаналізувати очікуваний тип введення (рядки, цілі числа, JSON, XML тощо).
- Розташувати кожну вхідну точку на основі попередніх кроків, щоб отримати більш зосереджений тестовий сценарій.
- Зрозуміти, яка служба відповідає повідомленням про помилку, і спробуйте створити точніший список нечітких елементів, щоб отримати більше інформації чи подробиць про помилку з цієї служби (це може бути база даних, окрема служба тощо).
